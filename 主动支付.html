<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <title>æ‰«ç æ”¯ä»˜æ¨¡æ‹Ÿï¼ˆå®Œæ•´æµç¨‹ï¼‰</title>
  <style>
    body { font-family: Arial, sans-serif; text-align:center; background:#f5f5f5; }

    /* å…¬ç”¨å®¹å™¨ */
    .page { display:none; }
    .active { display:block; }

    /* æ‰‹æœºå¤–è§‚ */
    #phone {
      width:160px; height:320px; border:4px solid #333; border-radius:20px;
      background:#000; color:#fff; cursor:grab;
    }
    #screen {
      width:130px; height:240px; background:#fff; margin:20px auto;
      border-radius:8px; display:flex; justify-content:center; align-items:center;
      text-align:center; padding:10px; font-size:16px;
    }

    /* äºŒç»´ç  */
    #qr { width:200px; height:200px; border:2px solid #333; background:#fff; }

    /* è¾“å…¥é‡‘é¢é¡µé¢ */
    #amountDisplay {
      font-size:26px; margin:10px; border:1px solid #ccc; padding:5px 15px;
      min-width:100px; border-radius:6px; text-align:right;
    }
    .keypad {
      display:grid; grid-template-columns:repeat(3, 1fr); gap:8px;
      margin-top:10px;
    }
    .keypad button {
      font-size:20px; padding:15px; border:none; border-radius:6px; background:#eee; cursor:pointer;
    }
    .keypad button:hover { background:#ddd; }
    #confirmBtn {
      margin-top:12px; padding:12px 20px; font-size:20px;
      background:#09bb07; color:#fff; border:none; border-radius:6px; cursor:pointer;
    }
    #successMsg { font-size:26px; color:#09bb07; margin-top:40px; }
  </style>
</head>
<body>
  <h1>æ‰«ç æ”¯ä»˜æ¨¡æ‹Ÿ</h1>

  <!-- é¡µé¢ 1: æ‰«ç  -->
  <div id="page-scan" class="page active">
    <p>æ‹–åŠ¨æ‰‹æœºå»æ‰«äºŒç»´ç </p>
    <div style="display:flex; justify-content:space-around; align-items:center; margin:40px;">
      <div id="phone" draggable="true">
        <div id="screen">ğŸ“± ç­‰å¾…æ‰«ç </div>
      </div>
      <img id="qr" src="https://api.qrserver.com/v1/create-qr-code/?data=PayHere&size=200x200" alt="äºŒç»´ç ">
    </div>
    <div id="scanMsg" style="display:none; font-size:22px; color:#09bb07; margin-top:20px;">
      âœ… æ‰«ç æˆåŠŸï¼æ­£åœ¨è·³è½¬...
    </div>
  </div>

  <!-- é¡µé¢ 2: è¾“å…¥é‡‘é¢ -->
  <div id="page-pay" class="page">
    <h2>è¯·è¾“å…¥æ”¯ä»˜é‡‘é¢</h2>
    <div id="amountDisplay">0</div>
    <div class="keypad">
      <button onclick="pressKey('1')">1</button>
      <button onclick="pressKey('2')">2</button>
      <button onclick="pressKey('3')">3</button>
      <button onclick="pressKey('4')">4</button>
      <button onclick="pressKey('5')">5</button>
      <button onclick="pressKey('6')">6</button>
      <button onclick="pressKey('7')">7</button>
      <button onclick="pressKey('8')">8</button>
      <button onclick="pressKey('9')">9</button>
      <button onclick="pressKey('.')">.</button>
      <button onclick="pressKey('0')">0</button>
      <button onclick="pressKey('â†')">â†</button>
    </div>
    <button id="confirmBtn" onclick="checkPay()">ç¡®è®¤æ”¯ä»˜</button>
  </div>

  <!-- é¡µé¢ 3: æˆåŠŸ -->
  <div id="page-success" class="page">
    <div id="successMsg">âœ… æ”¯ä»˜æˆåŠŸï¼</div>
  </div>

  <script>
    const phone = document.getElementById("phone");
    const qr = document.getElementById("qr");
    const screen = document.getElementById("screen");
    const scanMsg = document.getElementById("scanMsg");

    let amountInput = "";

    // æ‹–æ‹½æ‰«ç 
    phone.addEventListener("dragstart", (e)=> {
      e.dataTransfer.setData("text/plain","phone");
    });
    qr.addEventListener("dragover", (e)=> e.preventDefault());
    qr.addEventListener("drop", (e)=> {
      e.preventDefault();
      screen.innerHTML = "ğŸ” æ‰«ç ä¸­...";
      setTimeout(()=>{
        screen.innerHTML = "âœ… æ‰«ç æˆåŠŸ";
        scanMsg.style.display = "block";
        setTimeout(()=> switchPage("page-pay"), 1500);
      }, 1000);
    });

    // é¡µé¢åˆ‡æ¢
    function switchPage(id){
      document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    // è¾“å…¥é‡‘é¢
    function pressKey(key){
      if(key === "â†"){
        amountInput = amountInput.slice(0,-1);
      } else {
        amountInput += key;
      }
      document.getElementById("amountDisplay").innerText = amountInput || "0";
    }

    // æ£€æŸ¥æ”¯ä»˜é‡‘é¢
    function checkPay(){
      if(amountInput === "10" || amountInput === "10.0" || amountInput === "10.00"){
        switchPage("page-success");
      } else {
        alert("é‡‘é¢é”™è¯¯ï¼Œè¯·è¾“å…¥ 10 å…ƒ");
      }
    }
  </script>
</body>
</html>
